var fs=require("fs"),log=require("npmlog"),spawn=require("child_process").spawn,promiseMaker=require("./promisemaker"),platformOpen={win32:["cmd","/c","start"],darwin:["open"],linux:["xdg-open"]};
function openUrl(c,b){var a;a=platformOpen[process.platform];log.verbose("openUrl()#url:",c,", browserPath:",b);b&&existsSync(b)&&("linux"===process.platform&&a.splice(0,1),a=a.concat([b,"--new","--args"]));a=spawn(a[0],a.slice(1).concat([c]));a.stdout.on("data",log.verbose.bind(log,"openUrl()"));a.stderr.on("data",log.verbose.bind(log,"openUrl()"));return promiseMaker(a)}function existsSync(c){try{return fs.accessSync(c),!0}catch(b){if(b&&"ENOENT"===b.code)return!1;throw b;}}module.exports=openUrl;
